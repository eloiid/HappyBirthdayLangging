<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday Langging!</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@300;400;500&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    /* Floating hearts background */
    .hearts {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
    }

    .heart {
        position: absolute;
        color: #ff79c6;
        font-size: 20px;
        animation: float 8s linear infinite;
        opacity: 0;
        text-shadow: 0 0 8px rgba(255, 121, 198, 0.7);
    }

    @keyframes float {
        0% {
            transform: translateY(100vh) rotate(0deg);
            opacity: 0.7;
        }
        50% {
            opacity: 1;
        }
        100% {
            transform: translateY(-20vh) rotate(360deg);
            opacity: 0;
        }
    }

    /* New Interface Styles */
    .passcode-screen {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 20px;
      padding: 40px;
      text-align: center;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 15px 35px rgba(77, 168, 218, 0.4);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(77, 168, 218, 0.4);
      position: relative;
      overflow: hidden;
      z-index: 10;
      animation: fadeIn 1.5s ease-out;
      margin: 40px auto;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .passcode-screen::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(77, 168, 218, 0.15) 0%, transparent 70%);
      z-index: -1;
      animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .passcode-screen h1 {
      font-family: 'Playfair Display', sans-serif;
      font-size: 3.5rem;
      margin-bottom: 20px;
      color: #1a6bac;
      text-shadow: 0 0 8px rgba(26, 107, 172, 0.25);
      animation: pulseText 3s infinite;
    }
    
    @keyframes pulseText {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }
    
    .photo-container {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      overflow: hidden;
      margin: 20px auto;
      border: 5px solid #ff79c6;
      box-shadow: 0 0 25px rgba(255, 121, 198, 0.4);
      position: relative;
      transition: all 0.5s;
      animation: floatPhoto 6s ease-in-out infinite;
    }
    
    @keyframes floatPhoto {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    
    .photo-container:hover {
      transform: scale(1.05) rotate(5deg);
      box-shadow: 0 0 40px rgba(255, 121, 198, 0.6);
    }
    
    .photo-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }
    
    .passcode-input {
      margin: 25px 0;
      position: relative;
    }
    
    .passcode-input input {
      padding: 14px 25px;
      border: 2px solid #ff79c6;
      border-radius: 30px;
      background: rgba(255, 255, 255, 0.8);
      color: #0a3d6b;
      font-size: 1.1rem;
      width: 70%;
      max-width: 300px;
      outline: none;
      text-align: center;
      transition: all 0.3s;
      font-family: 'Poppins', sans-serif;
      box-shadow: 0 5px 15px rgba(255, 121, 198, 0.2);
    }
    
    .passcode-input input:focus {
      border-color: #ff4da6;
      box-shadow: 0 0 20px rgba(255, 77, 166, 0.4);
      transform: scale(1.02);
    }
    
    .hint {
      font-style: italic;
      color: #1a6bac;
      margin: 15px 0;
      font-size: 1.1rem;
      font-weight: 500;
      background: rgba(255, 255, 255, 0.7);
      padding: 8px 15px;
      border-radius: 20px;
      display: inline-block;
      animation: hintPulse 2s infinite;
    }
    
    @keyframes hintPulse {
      0% { box-shadow: 0 0 0 0 rgba(26, 107, 172, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(26, 107, 172, 0); }
      100% { box-shadow: 0 0 0 0 rgba(26, 107, 172, 0); }
    }
    
    /* Unified Button Styles */
    .btn {
      background: linear-gradient(45deg, #ff79c6, #ff9ecb);
      color: white;
      border: none;
      padding: 14px 35px;
      border-radius: 30px;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin: 10px;
      box-shadow: 0 7px 20px rgba(255, 121, 198, 0.5);
      font-family: 'Poppins', sans-serif;
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }
    
    .btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -60%;
      width: 20px;
      height: 200%;
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(25deg);
      transition: all 0.6s;
    }
    
    .btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 10px 25px rgba(255, 121, 198, 0.7);
    }
    
    .btn:hover::after {
      left: 120%;
    }
    
    .btn:active {
      transform: translateY(2px);
    }

    /* Alternate button style */
    .btn-alt {
      background: linear-gradient(45deg, #4da8da, #70c1ff);
    }

    /* Video Player Section - 1920x1080 */
    .video-container {
      display: none;
      max-width: 1920px;
      width: 90%;
      margin: 40px auto;
      background: white;
      padding: 30px 20px 40px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
    }

    .video-player {
      width: 100%;
      max-width: 1920px;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 aspect ratio (1080/1920) */
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      margin: 0 auto 20px;
      background: #000;
    }

    .video-player video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .video-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-top: 15px;
    }

    .video-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(45deg, #ff79c6, #ff9ecb);
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .video-btn:hover {
      transform: scale(1.1);
    }

    .video-btn:active {
      transform: scale(0.95);
    }

    /* Other screens */
    .gallery, #letterPage, #carousel {
      max-width: 600px;
      margin: 40px auto;
      background: white;
      padding: 30px 20px 40px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
      box-sizing: border-box;
      width: 90vw;
      display: none;
    }

    h1 {
      color: #d63384;
      font-size: 2.5rem;
      margin-bottom: 20px;
      word-break: break-word;
    }

    #photoGrid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .photo-item {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      text-align: center;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .photo-item img {
      width: 100%;
      height: auto;
      display: block;
      border-bottom: 1px solid #f5c2d3;
      object-fit: cover;
      flex-shrink: 0;
    }

    .photo-message {
      padding: 10px;
      font-size: 1rem;
      color: #d63384;
      background: #fff0f5;
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      word-break: break-word;
    }

    #letterContent {
      color: #333;
      font-size: 1.1rem;
      line-height: 1.6;
      text-align: left;
      max-width: 100%;
      box-sizing: border-box;
    }

    #letterContent p {
      margin-bottom: 15px;
      word-break: break-word;
    }

    #carouselItem {
      position: relative;
      max-height: 60vh;
      overflow: hidden;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
    }

    #carouselItem img {
      width: 100%;
      height: auto;
      max-height: 45vh;
      object-fit: contain;
      display: block;
      border-radius: 15px 15px 0 0;
    }

    #carouselItem .photo-message {
      padding: 15px;
      font-size: 1.2rem;
      color: #d63384;
      background: #fff0f5;
      text-align: center;
      word-break: break-word;
      border-radius: 0 0 15px 15px;
    }

    .nav-buttons {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .passcode-screen h1 {
        font-size: 2.5rem;
      }
      .photo-container {
        width: 200px;
        height: 200px;
      }
      .btn {
        padding: 12px 25px;
        font-size: 1rem;
      }
      .video-btn {
        width: 40px;
        height: 40px;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.8rem;
      }
      .photo-message {
        font-size: 0.9rem;
      }
      .passcode-input input {
        max-width: 100%;
      }
      .btn {
        font-size: 0.9rem;
        padding: 8px 20px;
        min-width: 80px;
      }
      #letterPage {
        font-size: 1rem;
      }
      #carouselItem img {
        max-height: 40vh;
      }
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: transparent;
      overflow-y: auto;
      cursor: url('https://cur.cursors-4u.net/cursors/cur-9/cur808.cur'), auto;
      scroll-behavior: smooth;
    }

    /* Music player controls */
    .music-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(255,255,255,0.8);
      padding: 10px;
      border-radius: 50px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .music-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, #ff79c6, #ff9ecb);
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }

    .music-btn:hover {
      transform: scale(1.1);
    }

    .volume-control {
      width: 100px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .music-controls:hover .volume-control {
      opacity: 1;
    }
  </style>
  <!-- Audio element for background music -->
  <audio id="birthdayMusic" loop>
    <source src="./bgmusic/BackgroundMusic.mp3" type="audio/mpeg">
    <!-- Fallback message -->
    Your browser does not support the audio element.
  </audio>
</head>
<body>
  <!-- Floating hearts background -->
  <div class="hearts" id="hearts"></div>

  <!-- Music controls -->
  <div class="music-controls">
    <button class="music-btn" id="playBtn"><i class="fas fa-play"></i></button>
    <button class="music-btn" id="pauseBtn"><i class="fas fa-pause"></i></button>
    <input type="range" class="volume-control" id="volumeControl" min="0" max="1" step="0.1" value="0.5">
  </div>

  <!-- New Passcode Screen -->
  <div class="passcode-screen" id="passcodeScreen">
    <h1>Happy Birthday Pangga! ‚ù§Ô∏è</h1>
    
    <div class="photo-container">
      <img src="./images/cover1.jpg" alt="My Wanngling">
    </div>
    
    <p class="hint">Hint: "Our Special Date"</p>
    
    <div class="passcode-input">
      <input type="password" id="passcodeInput" placeholder="Enter our special date" aria-label="Enter passcode">
    </div>
    
    <button class="btn" onclick="checkPasscode()">Unlock My Love</button>
  </div>

  <!-- Photo Gallery Section -->
  <div class="gallery" id="photoGallery">
    <h1>Hello Langging, Happy Birthday! üéâ</h1>
    <div id="photoGrid"></div>
    <div class="nav-buttons">
      <button class="btn" id="continueToMessageBtn" style="display:none;">Continue</button>
      <button class="btn btn-alt" id="backToPasscodeBtnFromGallery">Back</button>
    </div>
  </div>

  <div id="letterPage">
    <div id="letterContent" style="max-width: 800px; margin: auto; padding: 20px; background: #fff; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
      <p>Dear Langging,</p>
      <p>On this very special day, I just want to say how grateful I am to have you. Your love, strength, and kindness make my world brighter every single day. Watching you grow, chase your dreams, and light up every room you walk into ‚Äî that's my favorite thing in the world.</p>
      <p>As you turn 20, I want you to know that I believe in you wholeheartedly. You have so much potential, and I can't wait to see all the amazing things you will accomplish. Remember, it's okay to stumble and fall; what matters is that you get back up and keep going.</p>
      <p>Thank you for being my rock, my partner, and my best friend. You inspire me every day with your passion and determination. I am so proud of the person you are becoming, and I feel incredibly lucky to be by your side.</p>
      <p>I am grateful always Langging kay ni abot ka sa akong Life and hantud karon di gihapon ko ka tuo nga ang Crush ra nako sauna, Uyab na nako karon, Thank you lang sa Efforts diri nako, I appreciate all of that.</p>
      <p>Always remember nga naa rako diri kalingaw andam Maminaw sa mga Rants nimo lang, Baby will Always here will Listen to all of your Random Chikas and Life Talks.</p>
      <p>May this year bring you closer to your dreams Lang, fill your heart with joy, and surround you with love and happiness. Always remember that I am here for you Langging, cheering you on, and loving you more than words can express.</p>
      <p>Here's to many more birthdays together, to laughter, adventures, and all the beautiful moments we will share. I can't wait to celebrate you today and always.</p>
      <p>Happy 20th birthday, my Palannga. I'll always be here, cheering for you, loving you, and holding your hand through it all.</p>
      <p>With all my heart,<br /> ü•∞ Pangga/Dong Lloyd</p>
    </div>
    <div class="nav-buttons">
      <button class="btn" id="continueToVideoBtn">Continue</button>
      <button class="btn btn-alt" id="backToGalleryBtnFromLetter">Back</button>
    </div>
  </div>

  <!-- Video Player Section -->
  <div class="video-container" id="videoContainer">
    <h1>A Special Video for You Wanglangging ‚ù§Ô∏è</h1>
    <div class="video-player">
      <video id="birthdayVideo" width="1920" height="1080" controls>
        <source src="./Video/Lannging.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
    <div class="video-controls">
      <button class="video-btn" id="rewindBtn"><i class="fas fa-backward"></i></button>
      <button class="video-btn" id="playVideoBtn"><i class="fas fa-play"></i></button>
      <button class="video-btn" id="forwardBtn"><i class="fas fa-forward"></i></button>
    </div>
    <div class="nav-buttons">
      <button class="btn" id="continueToCarouselBtn">Continue</button>
      <button class="btn btn-alt" id="backToLetterBtnFromVideo">Back</button>
    </div>
  </div>

  <div id="carousel">
    <div id="carouselItem" class="photo-item"></div>
    <div class="nav-buttons">
      <button class="btn" id="prevCarouselBtn">Previous</button>
      <button class="btn" id="nextCarouselBtn">Next</button>
      <button class="btn btn-alt" id="backToVideoBtnFromCarousel">Back</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Create floating hearts background
      function createHearts() {
          const heartsContainer = document.getElementById('hearts');
          const heartCount = 50;

          for (let i = 0; i < heartCount; i++) {
              const heart = document.createElement('div');
              heart.classList.add('heart');
              heart.innerHTML = '‚ù§Ô∏è';
              heart.setAttribute('aria-hidden', 'true');

              // Random position and animation
              const left = Math.random() * 100;
              const delay = Math.random() * 5;
              const duration = Math.random() * 5 + 5;
              const size = Math.random() * 20 + 10;

              heart.style.left = `${left}%`;
              heart.style.animationDelay = `${delay}s`;
              heart.style.animationDuration = `${duration}s`;
              heart.style.fontSize = `${size}px`;

              heartsContainer.appendChild(heart);
          }
      }

      // Create sparkle effect
      function createSparkle(x, y) {
          const sparkle = document.createElement('div');
          sparkle.classList.add('sparkle');
          sparkle.style.left = `${x}px`;
          sparkle.style.top = `${y}px`;
          sparkle.setAttribute('aria-hidden', 'true');
          document.body.appendChild(sparkle);
          
          // Remove after animation completes
          setTimeout(() => {
              sparkle.remove();
          }, 1500);
      }

      // Call the function to create hearts
      createHearts();

     const photos = [
        { url: "./images/image1.jpeg", msg: "You will always be my Baby. ü•∫" },
        { url: "./images/image2.jpg", msg: "You are always Adventurous. üëä" },
        { url: "./images/image3.JPG", msg: "You makes me Happy. üòÑ" },
        { url: "./images/image4.jpeg", msg: "My Intelligent Baby. ü§ì" },
        { url: "./images/image5.JPG", msg: "You always Provide for Me. ü•π" },
        { url: "./images/image6.jpg", msg: "My Healthy and Energetic baby. üèÉ‚Äç‚ôÇÔ∏è" },
        { url: "./images/image7.jpg", msg: "My Stylish Wanngingg. üßç‚Äç‚ôÇÔ∏è" },
        { url: "./images/image8.jpg", msg: "My Super Hot Langging. üî•" },
        { url: "./images/image9.jpg", msg: "My always type, Sobrang Handsome!! ü§©" },
        { url: "./images/image10.JPG", msg: "I am Always Here for my Pangga. üòò" },
        { url: "./images/image11.jpeg", msg: "My Cutiepatotie Baby. üòú" },
        { url: "./images/fview.jpg", msg: "My Favorite View. üòå" },
        { url: "./images/image13.JPG", msg: "You always makes me Happy Lang. ‚ò∫Ô∏è" },
        { url: "./images/image14.jpg", msg: "You will always be My Man. üòç" },
        { url: "./images/image15.jpg", msg: "Your Existence Matters to Me. ü•∫" },
        { url: "./images/image16.jpg", msg: "You're my Sunshine Langlang. ‚òÄÔ∏è" },
        { url: "./images/image17.jpeg", msg: "You are the Apple of my Eye. ü§™" },
        { url: "./images/image18.jpg", msg: "My Sexy Baby. üî•" },
        { url: "./images/image19.jpg", msg: "I am Always Here for You. ü´Ç" },
        { url: "./images/image20.jpg", msg: "My Batang Gamay Renren. ü•∫" },
        { url: "./images/image21.jpg", msg: "My Always Pogi Langlang. üòó" },
      ];

      const music = document.getElementById("birthdayMusic");
      const playBtn = document.getElementById("playBtn");
      const pauseBtn = document.getElementById("pauseBtn");
      const volumeControl = document.getElementById("volumeControl");

      // Video elements
      const video = document.getElementById("birthdayVideo");
      const playVideoBtn = document.getElementById("playVideoBtn");
      const rewindBtn = document.getElementById("rewindBtn");
      const forwardBtn = document.getElementById("forwardBtn");

      // Set initial volume
      music.volume = 0.5;

      // Music controls
      playBtn.addEventListener("click", () => {
        music.play();
      });

      pauseBtn.addEventListener("click", () => {
        music.pause();
      });

      volumeControl.addEventListener("input", () => {
        music.volume = volumeControl.value;
      });

      // Video controls
      playVideoBtn.addEventListener("click", () => {
        if (video.paused) {
          video.play();
          playVideoBtn.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
          video.pause();
          playVideoBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
      });

      rewindBtn.addEventListener("click", () => {
        video.currentTime = Math.max(0, video.currentTime - 10);
      });

      forwardBtn.addEventListener("click", () => {
        video.currentTime = Math.min(video.duration, video.currentTime + 10);
      });

      video.addEventListener('play', () => {
        playVideoBtn.innerHTML = '<i class="fas fa-pause"></i>';
      });

      video.addEventListener('pause', () => {
        playVideoBtn.innerHTML = '<i class="fas fa-play"></i>';
      });

      // Elements
      const passcodeScreen = document.getElementById("passcodeScreen");
      const photoGallery = document.getElementById("photoGallery");
      const photoGrid = document.getElementById("photoGrid");
      const continueToMessageBtn = document.getElementById("continueToMessageBtn");
      const backToPasscodeBtnFromGallery = document.getElementById("backToPasscodeBtnFromGallery");

      const letterPage = document.getElementById("letterPage");
      const continueToVideoBtn = document.getElementById("continueToVideoBtn");
      const backToGalleryBtnFromLetter = document.getElementById("backToGalleryBtnFromLetter");

      const videoContainer = document.getElementById("videoContainer");
      const continueToCarouselBtn = document.getElementById("continueToCarouselBtn");
      const backToLetterBtnFromVideo = document.getElementById("backToLetterBtnFromVideo");

      const carousel = document.getElementById("carousel");
      const carouselItem = document.getElementById("carouselItem");
      const prevCarouselBtn = document.getElementById("prevCarouselBtn");
      const nextCarouselBtn = document.getElementById("nextCarouselBtn");
      const backToVideoBtnFromCarousel = document.getElementById("backToVideoBtnFromCarousel");

      let currentIndex = 0;
      let carouselInterval;

      // Passcode functionality
      window.checkPasscode = function () {
        const input = document.getElementById("passcodeInput").value;
        
        if (input === "041125") {
          // Create sparkles on success
          for (let i = 0; i < 20; i++) {
              setTimeout(() => {
                  createSparkle(
                      Math.random() * window.innerWidth,
                      Math.random() * window.innerHeight
                  );
              }, i * 100);
          }
          
          passcodeScreen.style.display = "none";
          photoGallery.style.display = "block";
          music.play().catch(e => console.log("Auto-play prevented:", e));
          displayPhotos();
        } else {
          // Shake effect for wrong passcode
          const input = document.getElementById('passcodeInput');
          input.style.animation = 'shake 0.5s';
          input.value = '';
          input.setAttribute('placeholder', 'Try again!');
          
          setTimeout(() => {
              input.style.animation = '';
          }, 500);
        }
      };

      function displayPhotos() {
        photoGrid.innerHTML = "";
        photos.forEach((photo, i) => {
          const item = document.createElement("div");
          item.className = "photo-item";
          item.style.transition = "opacity 0.8s ease, transform 0.8s ease";
          item.style.opacity = 0;
          item.style.transform = "translateY(30px)";
          item.innerHTML = `
            <img src="${photo.url}" alt="photo" />
            <div class="photo-message">${photo.msg}</div>
          `;
          photoGrid.appendChild(item);
          setTimeout(() => {
            item.style.opacity = 1;
            item.style.transform = "translateY(0)";
          }, i * 200);
        });
        continueToMessageBtn.style.display = "inline-block";
      }

      continueToMessageBtn.addEventListener("click", () => {
        photoGallery.style.display = "none";
        letterPage.style.display = "block";
      });

      backToPasscodeBtnFromGallery.addEventListener("click", () => {
        photoGallery.style.display = "none";
        passcodeScreen.style.display = "block";
        music.pause();
        music.currentTime = 0;
      });

      continueToVideoBtn.addEventListener("click", () => {
        letterPage.style.display = "none";
        videoContainer.style.display = "block";
        video.play().catch(e => console.log("Video auto-play prevented:", e));
      });

      backToGalleryBtnFromLetter.addEventListener("click", () => {
        letterPage.style.display = "none";
        photoGallery.style.display = "block";
      });

      continueToCarouselBtn.addEventListener("click", () => {
        videoContainer.style.display = "none";
        carousel.style.display = "block";
        currentIndex = 0;
        showCarouselItem(currentIndex);
        startCarouselAutoPlay();
      });

      backToLetterBtnFromVideo.addEventListener("click", () => {
        videoContainer.style.display = "none";
        letterPage.style.display = "block";
        video.pause();
      });

      prevCarouselBtn.addEventListener("click", () => {
        currentIndex = (currentIndex - 1 + photos.length) % photos.length;
        showCarouselItem(currentIndex);
      });

      nextCarouselBtn.addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % photos.length;
        showCarouselItem(currentIndex);
      });

      backToVideoBtnFromCarousel.addEventListener("click", () => {
        carousel.style.display = "none";
        videoContainer.style.display = "block";
        stopCarouselAutoPlay();
      });

      function showCarouselItem(index) {
        const item = photos[index];
        carouselItem.innerHTML = `
          <img src="${item.url}" alt="photo" />
          <div class="photo-message">${item.msg}</div>
        `;
      }

      function startCarouselAutoPlay() {
        stopCarouselAutoPlay();
        carouselInterval = setInterval(() => {
          currentIndex = (currentIndex + 1) % photos.length;
          showCarouselItem(currentIndex);
        }, 4000);
      }

      function stopCarouselAutoPlay() {
        if (carouselInterval) clearInterval(carouselInterval);
      }

      // Allow pressing Enter to submit passcode
      document.getElementById('passcodeInput').addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
              checkPasscode();
          }
      });
      
      // Add sparkle effect on click
      document.addEventListener('click', function(e) {
          createSparkle(e.clientX, e.clientY);
      });
      
      // Add CSS for shake animation
      const style = document.createElement('style');
      style.textContent = `
          @keyframes shake {
              0%, 100% { transform: translateX(0); }
              20%, 60% { transform: translateX(-5px); }
              40%, 80% { transform: translateX(5px); }
          }
      `;
      document.head.appendChild(style);
    });
  </script>
</body>
</html>
